<% action = (note.persisted? ? note_url(note) : notes_url) %>
<% method = (note.persisted? ? "put" : "post") %>
<% message = (note.persisted? ? "Update note" : "Create note") %>

<form action="<%= action %>" method="post">
  <input
     name="_method"
     type="hidden"
     value="<%= method %>">
  <input
     name="authenticity_token"
     type="hidden"
     value="<%= form_authenticity_token %>">
  <input
    name="note[user_id]"
    type="hidden"
    value="<%= current_user.id %>">
  <input
    name="note[track_id]"
    type="hidden"
    value="<%= note.track_id %>">

  <label for="note_body">Body</label>
  <input
     id="note_body"
     name="note[body]"
     type="textarea"
     value="<%= note.body %>">
  <br>

  <input type="submit" value="<%= message %>">
</form>